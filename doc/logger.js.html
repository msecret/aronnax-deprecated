<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: logger.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: logger.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * Copyright (C) 2013 Marco Segreto
 * vim: set et ts=2 sw=2 tw=80:
 */

/**
 * @file Holds the logging classes
 */

goog.provide('aronnax.Logger');
goog.require('goog.object');
goog.require('aronnax.accessor');


aronnax.logs = [];

/**
 * A logging instance to log errors
 * @class
 * @constuctor
 * @this aronnax.Logger
 * @mixes aronnax.accessor
 * @param name The name given to the particular log, sent to the server
 */
aronnax.Logger = function(name) {

  /**
   * The name of the log 
   * @instance
   * @protected
   * @default window.location.hostname
   */
  this.name = name || window.location.hostname;
  aronnax.logs.push(this);
};
goog.mixin(aronnax.Logger.prototype, aronnax.accessor);

/**
 * Settings for the logger 
 */
aronnax.Logger.settings = {
  // TODO replace with global var for env
  environment: 'staging',
  errorTypes: ['log', 'warn', 'error']
};

/**
 * Log an error or message
 * @protected
 * @param {String} type The type of log message, defaults to error, 
 * warning and debug.
 * @param {String|Object} message The message to log, as a string or an object
 * with different parameters 
 */
aronnax.Logger.prototype._write = function(type, message) {
  var err = {};

  err.type = type;
  if (typeof message === 'string') {
    err.message = message;
  }
  else {
    goog.object.extend(err, message); 
  }
  
  // TODO replace with globals for environments
  switch (aronnax.Logger.settings.environment) {
    case 'staging':
      window.console[type](this.name+ ':' +err.message);
      break;
    case 'production':
      break;
    default:
      window.console[type](this.name+ ':' +err.message);
      break;
  }
};

/**
 * Logging message as the "log" type of message
 * @param {String|Object} message The message to log, as a string or an object
 * with different parameters
 */
aronnax.Logger.prototype.log = function(message) {
  this._write('log', message);  
};

/**
 * Logging message as the "warning" type of message
 * @param {String|Object} message The message to log, as a string or an object
 * with different parameters
 */
aronnax.Logger.prototype.warning = function(message) {
  this._write('warning', message);  
};

/**
 * Logging message as the "error" type of message
 * @param {String|Object} message The message to log, as a string or an object
 * with different parameters
 */
aronnax.Logger.prototype.error = function(message) {
  this._write('error', message);  
};

/**
 * Will get the logging instance by name, creating a new one if it doesn't exist 
 * @param name Name of the log being accessed, or created 
 */
aronnax.Logger.getLog = function(name) {
  var i = 0,
      ilen = aronnax.logs.length;

  for( ; i &lt; ilen; i++) {
    var log = aronnax.logs[i];
    if (log.get('name') === name) {
      return log;
    }
  }

  return new aronnax.Logger(name);
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="fb2aa7c6aa.html">aronnax/main</a></li></ul><h3>Classes</h3><ul><li><a href="aronnax.base.html">base</a></li><li><a href="aronnax.LinkedListNode.html">LinkedListNode</a></li><li><a href="aronnax.Logger.html">Logger</a></li><li><a href="aronnax.OrderedList.html">OrderedList</a></li><li><a href="aronnax.Pool.html">Pool</a></li><li><a href="aronnax.Pooled.html">Pooled</a></li><li><a href="aronnax.UnorderedList.html">UnorderedList</a></li></ul><h3>Namespaces</h3><ul><li><a href="aronnax.html">aronnax</a></li></ul><h3>Mixins</h3><ul><li><a href="aronnax.accessor.html">accessor</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Thu Mar 28 2013 20:39:53 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
</body>
</html>
